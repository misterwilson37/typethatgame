<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Oz Database Seeder</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Wizard of Oz: Database Seeder</h1>
    <p>Click the button below to upload Chapter 1 to your Firestore Database.</p>
    
    <button id="uploadBtn">Upload Chapter 1</button>
    <div id="status"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- CONFIGURATION ---
        // PASTE YOUR FIREBASE CONFIG HERE
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.firebasestorage.app",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        // ---------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // THE DATA: Wizard of Oz, Chapter 1
        const chapterOneData = {
            title: "The Cyclone",
            chapterIndex: 1,
            segments: [
                {
                    id: 1,
                    text: "Dorothy lived in the midst of the great Kansas prairies, with Uncle Henry, who was a farmer, and Aunt Em, who was the farmer's wife. Their house was small, for the lumber to build it had to be carried by wagon many miles. There were four walls, a floor and a roof, which made one room; and this room contained a rusty looking cookstove, a cupboard for the dishes, a table, three or four chairs, and the beds.",
                    image: "https://upload.wikimedia.org/wikipedia/commons/8/86/The_Wonderful_Wizard_of_Oz_019.jpg" // Public domain image
                },
                {
                    id: 2,
                    text: "Uncle Henry and Aunt Em had a big bed in one corner, and Dorothy a little bed in another corner. There was no garret at all, and no cellar-except a small hole dug in the ground, called a cyclone cellar, where the family could go in case one of those great whirlwinds arose, mighty enough to crush any building in its path. It was reached by a trap door in the middle of the floor, from which a ladder led down into the small, dark hole.",
                    image: null // No image for this segment
                },
                {
                    id: 3,
                    text: "When Dorothy stood in the doorway and looked around, she could see nothing but the great gray prairie on every side. Not a tree nor a house broke the broad sweep of flat country that reached to the edge of the sky in all directions. The sun had baked the plowed land into a gray mass, with little cracks running through it. Even the grass was not green, for the sun had burned the tops of the long blades until they were the same gray color to be seen everywhere. Once the house had been painted, but the sun blistered the paint and the rains washed it away, and now the house was as dull and gray as everything else.",
                    image: null
                }
            ]
        };

        document.getElementById('uploadBtn').addEventListener('click', async () => {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = "Uploading...";
            
            try {
                // We create a document called 'chapter_1' inside a collection 'books/wizard_of_oz/chapters'
                await setDoc(doc(db, "books", "wizard_of_oz", "chapters", "chapter_1"), chapterOneData);
                
                statusDiv.innerHTML = "<span class='success'>Success! Chapter 1 uploaded. You can close this file now.</span>";
                console.log("Document written successfully");
            } catch (e) {
                statusDiv.innerHTML = "<span class='error'>Error: " + e.message + "</span><br>Check your console (F12) for details.";
                console.error("Error adding document: ", e);
            }
        });
    </script>
</body>
</html>
